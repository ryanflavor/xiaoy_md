# Docker Compose Environment Variables
# Copy this file to .env and adjust values as needed

# ====================
# Environment Mode
# ====================
# Options: development, test, production
ENVIRONMENT=development
DEBUG=false
LOG_LEVEL=INFO
LOG_FORMAT=json

# ====================
# NATS Configuration
# ====================
# NATS container settings
NATS_VERSION=latest
NATS_CONTAINER_NAME=nats

# NATS command - Different for each environment:
# Development: -js -DV (JetStream with debug)
# Production: -c /etc/nats/nats-server.conf (with config file)
# Test: -js (JetStream only)
NATS_COMMAND=-js -DV

# NATS ports
NATS_CLIENT_PORT=4222
NATS_MONITOR_PORT=8222
NATS_CLUSTER_PORT=6222

# NATS connection URL for the service
# Examples:
# - Basic: nats://nats:4222
# - Auth: nats://user:pass@nats:4222  # pragma: allowlist secret
# - TLS: tls://nats:4222
NATS_URL=nats://nats:4222

# NATS authentication (leave empty for no auth)
NATS_USER=
NATS_PASSWORD=  # pragma: allowlist secret

# NATS configuration file (leave empty to use command line options)
# Example: ./config/nats-server.conf
NATS_CONFIG=


# NATS cluster settings
NATS_CLUSTER_ID=market-data-cluster
NATS_CLIENT_ID=market-data-service-1

# NATS logging
NATS_LOG_LEVEL=debug

# ====================
# Service Configuration
# ====================
# Service container settings
SERVICE_IMAGE=market-data-service:local
SERVICE_CONTAINER_NAME=market-data-service


# Development source mount (leave empty in production)
# In development: ./src
# In production: (leave empty)
DEV_SOURCE_MOUNT=

# Logs mount
SOURCE_MOUNT=./logs

# Resource limits
SERVICE_CPU_LIMIT=1
SERVICE_MEMORY_LIMIT=1G
SERVICE_CPU_RESERVE=0.5
SERVICE_MEMORY_RESERVE=512M

# ====================
# Monitoring (Optional)
# ====================
# Prometheus metrics port
METRICS_PORT=7777
EXPORTER_VERSION=latest

# ====================
# Docker Settings
# ====================
# Restart policy: unless-stopped, on-failure, always, no
RESTART_POLICY=unless-stopped

# Network and volume names
NETWORK_NAME=market-data-net
NATS_VOLUME_NAME=market-data-nats-volume

# ====================
# Build Arguments (Optional)
# ====================
# Proxy settings for building behind corporate firewall
HTTP_PROXY=
HTTPS_PROXY=

# ====================
# Environment-Specific Examples
# ====================

# --- DEVELOPMENT ---
# ENVIRONMENT=development
# DEBUG=true
# LOG_LEVEL=DEBUG
# NATS_COMMAND=-js -DV
# DEV_SOURCE_MOUNT=./src
# RESTART_POLICY=unless-stopped

# --- TEST ---
# ENVIRONMENT=test
# DEBUG=false
# LOG_LEVEL=DEBUG
# NATS_COMMAND=-js
# NATS_USER=testuser
# NATS_PASSWORD=testpass
# RESTART_POLICY=on-failure:3

# --- PRODUCTION WITH AUTH ---
# ENVIRONMENT=production
# DEBUG=false
# LOG_LEVEL=INFO
# NATS_COMMAND=-c /etc/nats/nats-server.conf
# NATS_CONFIG=./config/nats-server.conf
# NATS_URL=nats://nats:4222
# NATS_USER=produser
# NATS_PASSWORD=strongpassword
# DEV_SOURCE_MOUNT=
# SERVICE_CPU_LIMIT=2
# SERVICE_MEMORY_LIMIT=2G
# RESTART_POLICY=always

# --- PRODUCTION WITH TLS ---
# ENVIRONMENT=production
# DEBUG=false
# LOG_LEVEL=INFO
# NATS_COMMAND=-c /etc/nats/nats-server-tls.conf
# NATS_CONFIG=./config/nats-server-tls.conf
# NATS_CERTS_PATH=./certs/prod
# NATS_URL=tls://nats:4222
# NATS_USER=produser
# NATS_PASSWORD=strongpassword
# NATS_TLS_CERT=/certs/client-cert.pem
# NATS_TLS_KEY=/certs/client-key.pem
# NATS_TLS_CA=/certs/ca.pem
# SERVICE_CERTS_PATH=./certs/prod
# DEV_SOURCE_MOUNT=
# RESTART_POLICY=always
